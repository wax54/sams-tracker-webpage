(this["webpackJsonpreact-time-tracker"]=this["webpackJsonpreact-time-tracker"]||[]).push([[0],{190:function(e,t,r){},191:function(e,t,r){},369:function(e,t,r){},370:function(e,t,r){},371:function(e,t,r){},375:function(e,t,r){"use strict";r.r(t);var n=r(1),a=r.n(n),c=r(82),s=r.n(c),o=(r(190),r(191),r(0)),i=function(){return Object(o.jsxs)("div",{className:"navbar navbar-expand-sm navbar-dark bg-primary",children:[Object(o.jsxs)("span",{className:"navbar-brand px-4",children:["Time Traker ",Object(o.jsx)("i",{className:"fas fa-chart-line fa-md"})]}),Object(o.jsx)("button",{className:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navLinks",children:Object(o.jsx)("span",{className:"navbar-toggler-icon"})}),Object(o.jsx)("div",{className:"collapse navbar-collapse navbar-nav text-center justify-content-between mx-3",id:"navLinks",children:Object(o.jsx)("a",{href:"index.html",className:"nav-item nav-link active",children:"Dashboard"})})]})},u=r(33),l=r(15),d=r(2),f=r(8),h=r(11),b=r.n(h),j=r(41),p=r(111),v=r.n(p);function m(e){if(e.response){console.error("API Error:",e.response);var t=e.response.data.error.message;return Array.isArray(t)?t:[t]}return["DB CONNECTION ERROR"]}function g(e){return{type:"UPDATE_SHIFT",payload:{start:e.start,type:e.type,category:e.category,end:new Date}}}function y(e){var t=e.username,r=e.password;return function(){var e=Object(j.a)(b.a.mark((function e(n){var a,c;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n({type:"RESET_ERROR"}),e.next=4,v.a.post("/api/users/login",{username:t,password:r});case 4:return a=e.sent,n({type:"SET_USER",payload:a.data.user}),e.abrupt("return",{status:!0,user:a.data.user});case 9:return e.prev=9,e.t0=e.catch(0),c=m(e.t0),e.abrupt("return",{status:!1,errors:c});case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}()}function O(e){var t=e.username,r=e.password;return function(){var e=Object(j.a)(b.a.mark((function e(n){var a,c;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n({type:"RESET_ERROR"}),e.next=4,v.a.post("api/users/register",{username:t,password:r});case 4:return a=e.sent,n({type:"SET_USER",payload:a.data.user}),e.abrupt("return",{status:!0,user:a.data.user});case 9:return e.prev=9,e.t0=e.catch(0),c=m(e.t0),e.abrupt("return",{status:!1,errors:c});case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}()}var x=function(e){var t=e.msg,r=e.persistence,n=void 0===r?0:r,a=Math.random()+"-alert";return+n>0&&setTimeout((function(){document.getElementById(a).remove()}),+n),Object(o.jsx)("div",{className:"alert bg-warning",id:a,children:t})},w=function(){var e=Object(f.c)((function(e){return e.shifts.filter((function(e){return!e.end}))})),t={type:"",category:""},r=Object(n.useState)(t),a=Object(d.a)(r,2),c=a[0],s=a[1],i=Object(n.useState)({}),h=Object(d.a)(i,2),b=h[0],j=h[1],p=Object(f.b)();function v(e){var t=e.target,r=t.name,n=t.value;s((function(e){return Object(l.a)(Object(l.a)({},e),{},Object(u.a)({},r,n))}))}function m(e,t){j((function(r){return Object(l.a)(Object(l.a)({},r),{},Object(u.a)({},e,t))})),setTimeout((function(){j((function(t){return Object(l.a)(Object(l.a)({},t),{},Object(u.a)({},e,void 0))}))}),3e3)}return Object(o.jsx)("form",{id:"new-shift",className:"col-xl border m-3 p-4 rounded shadow ",onSubmit:function(r){r.preventDefault();var n=c.type.toLowerCase(),a=c.category.toLowerCase();if(n&&a){if(e.some((function(e){return e.type===n&&e.category===a})))return void m("both","Already clocked in to ".concat(n," for ").concat(a));s(t),p(function(e,t){return{type:"START_SHIFT",payload:{start:new Date,type:e,category:t}}}(n,a))}else n||m("type","input must be filled"),a||m("category","input must be filled")},children:Object(o.jsxs)("div",{className:"row align-items-center justify-content-around",children:[Object(o.jsx)("h1",{className:"col-lg-3 col-xl-12 display-4 text-center",children:"New Shift!"}),Object(o.jsxs)("div",{className:"col-12 col-lg-2 col-xl-5 m-2 mb-3",children:[Object(o.jsx)("label",{htmlFor:"type",className:"form-label",children:"Work-Type"}),Object(o.jsx)("div",{className:"input-group",children:Object(o.jsx)("input",{type:"text",className:"form-control",id:"type",name:"type",value:c.type,onChange:v,placeholder:"Coding"})}),b.type?Object(o.jsx)(x,{msg:b.type}):null]}),Object(o.jsxs)("div",{className:" col-lg-3 col-xl-5 m-2 mb-3",children:[Object(o.jsx)("label",{htmlFor:"category",className:"form-label",children:"Category"}),Object(o.jsxs)("div",{className:"input-group",children:[Object(o.jsx)("div",{className:"input-group-prepend",children:Object(o.jsx)("span",{className:"input-group-text",children:"For "})}),Object(o.jsx)("input",{type:"text",className:"form-control",id:"category",name:"category",value:c.category,onChange:v,placeholder:"Fun"})]}),b.category?Object(o.jsx)(x,{msg:b.category}):null]}),Object(o.jsxs)("div",{id:"clockin-buttons",className:"col m-2 mb-3",children:[b.both?Object(o.jsx)(x,{msg:b.both}):null,Object(o.jsx)("button",{type:"submit",className:"btn btn-secondary col-12 p-3 px-md-5 ",children:"Clock In"})]})]})})},N=r(42),T=r(16),S=r(6),k=r(112),E=r(113),R=function(){function e(t){var r=t.start,n=t.type,a=t.category,c=t.end;Object(k.a)(this,e),r instanceof Date?this.start=r:this.start=new Date(r),this.type=n,this.category=a,c&&(c instanceof Date?this.end=c:this.end=new Date(c))}return Object(E.a)(e,[{key:"duration",value:function(){return this.end?this.end.getTime()-this.start.getTime():(new Date).getTime()-this.start.getTime()}},{key:"getHours",value:function(){return this.duration()/36e5}},{key:"getFormattedDuration",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:2,t=this.duration(),r=D(t,e);return r}},{key:"equals",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if("object"!==typeof e)return!1;if(this.category===e.category&&this.type===e.type){if(this.start.getTime()===e.start.getTime())return!0;if(!t)return!0}return!1}},{key:"clockOut",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date;this.end=e}},{key:"splitShift",value:function(t,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.category,a=new e({start:t,type:r,category:n,end:this.end});return this.clockOut(t),a}}]),e}(),I=function(){function e(){Object(k.a)(this,e),this.shifts=[],this.add.apply(this,arguments)}return Object(E.a)(e,[{key:"toString",value:function(){return"A ShiftCollection of length "+this.length()+" "+this.shifts}},{key:"add",value:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];for(var n=0,a=t;n<a.length;n++){var c=a[n];c instanceof R||(c=new R(c)),this.shifts.push(c)}}},{key:"getTotalHours",value:function(){return this.shifts.reduce((function(e,t){return e+t.getHours()}),0)}},{key:"remove",value:function(e){var t=this.shifts.findIndex((function(t){return t.category===e.category&&t.type===e.type&&t.start===e.start}));return-1!==t&&(this.shifts.splice(t,1),!0)}},{key:"contains",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return!!this.find(e,t)}},{key:"changeCategory",value:function(e,t){var r=this.category(e).shifts;return!!r.length&&(r.forEach((function(e){e.category=t})),!0)}},{key:"changeType",value:function(e,t){var r=this.type(e).shifts;return!!r.length&&(r.forEach((function(e){e.type=t})),!0)}},{key:"find",value:function(e){var t,r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=Object(S.a)(this.shifts);try{for(n.s();!(t=n.n()).done;){var a=t.value;if(a.equals(e,r))return a}}catch(c){n.e(c)}finally{n.f()}return!1}},{key:"getCategories",value:function(){var e,t=new Set,r=Object(S.a)(this.shifts);try{for(r.s();!(e=r.n()).done;){var n=e.value;t.add(n.category)}}catch(a){r.e(a)}finally{r.f()}return Object(T.a)(t)}},{key:"getTypes",value:function(){var e,t=new Set,r=Object(S.a)(this.shifts);try{for(r.s();!(e=r.n()).done;){var n=e.value;t.add(n.type)}}catch(a){r.e(a)}finally{r.f()}return Object(T.a)(t)}},{key:"getShiftsAfter",value:function(t){return Object(N.a)(e,Object(T.a)(this.shifts.filter((function(e){var r=e.start;return t.getTime()<r.getTime()}))))}},{key:"getShiftsBefore",value:function(t){return Object(N.a)(e,Object(T.a)(this.shifts.filter((function(e){var r=e.start;return t.getTime()<r.getTime()}))))}},{key:"getCurrShifts",value:function(){return Object(N.a)(e,Object(T.a)(this.shifts.filter((function(e){return!e.end}))))}},{key:"category",value:function(e){return this.filter("category",e)}},{key:"type",value:function(e){return this.filter("type",e)}},{key:"filter",value:function(t,r){var n=this.shifts.filter((function(e){return e[t]==r}));return Object(N.a)(e,Object(T.a)(n))}},{key:"length",value:function(){return this.shifts.length}}]),e}();function D(e,t){var r=36e5,n=864e5,a=2628e6,c=31536e6,s="",o=0;e<0&&(s+="- ",e*=-1);var i=Math.floor(e/c);if(i&&(e-=i*c,s+=i+" years ",++o==t))return s;var u=Math.floor(e/a);if(u&&(e-=u*a,s+=u+" Months ",++o==t))return s;var l=Math.floor(e/n);if(l&&(e-=l*n,s+=l+" Days ",++o==t))return s;var d=Math.floor(e/r);if(d&&(e-=d*r,s+=d+" Hours ",++o==t))return s;var f=Math.floor(e/6e4);if(f&&(e-=6e4*f,s+=f+" mins ",++o==t))return s;var h=Math.floor(e/1e3);return h&&(e-=1e3*h,s+=h+" seconds ",++o),s}var C=function(e){var t=e.shift,r=Object(f.b)(),a=Object(n.useState)(t.getFormattedDuration()),c=Object(d.a)(a,2),s=c[0],i=c[1];function u(e){var n=e.target.dataset.reference;if("NOW"===n)r(g(t));else if("-15"===n){var a=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Date;return new Date(t.getTime()+6e4*e)}(-15);r(function(e){var t=e.start,r=e.type,n=e.category,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Date;return{type:"UPDATE_SHIFT",payload:{start:t,type:r,category:n,end:a}}}(t,a))}else console.error("ERROR ",n),r(g(t))}return Object(n.useEffect)((function(){var e=setInterval((function(){return i(t.getFormattedDuration())}),1e3);return function(){return clearInterval(e)}}),[t,i]),Object(o.jsxs)("li",{className:"row p-3 align-items-start justify-content-center",children:[Object(o.jsxs)("div",{className:"col-7 text-center h2",children:[Object(o.jsxs)("span",{className:"type",children:[t.type," "]})," for",Object(o.jsxs)("span",{className:"category",children:[" ",t.category]}),Object(o.jsx)("div",{className:"shift-length",children:s})]}),Object(o.jsxs)("div",{className:"col-4 dropdown clockout",children:[Object(o.jsx)("button",{className:"btn btn-secondary dropdown-toggle text-center","data-bs-toggle":"dropdown",children:"Clock Out"}),Object(o.jsxs)("div",{className:"dropdown-menu clock-out",children:[Object(o.jsx)("button",{className:"btn","data-reference":"NOW",onClick:u,children:"Now"}),Object(o.jsx)("button",{className:"btn","data-reference":"-15",onClick:u,children:"15 Mins Ago"})]})]})]})},A=function(){var e=Object(f.c)((function(e){return e.shifts.filter((function(e){return!e.end}))}));return e=e.map((function(e){return new R(e)})),Object(o.jsx)("div",{className:"col-xl m-3 p-4 rounded shadow border",children:Object(o.jsxs)("div",{className:"row align-items-center justify-content-around",children:[Object(o.jsx)("h1",{className:"display-4 text-center col-12 col-md-3 col-xl-12",children:"Current Shifts"}),Object(o.jsx)("ul",{id:"current-shifts",className:"col-12 col-md-9 col-xl-12",children:e.map((function(e){return Object(o.jsx)(C,{shift:e},"".concat(e.type,"-").concat(e.category))}))})]})})},F=function(){return Object(o.jsx)("div",{className:"container-fluid p-2 align-items-center justify-content-around",children:Object(o.jsxs)("div",{className:"row border m-3 p-4 rounded shadow justify-content-center",children:[Object(o.jsx)(w,{}),Object(o.jsx)(A,{})]})})},_=r(88),L=function(){var e=Object(f.c)((function(e){var t=e.shifts;return Object(N.a)(I,Object(T.a)(t))})),t=e.getCategories(),r=Object(n.useState)(t.map((function(t){return{data:[e.category(t).getTotalHours()],name:t}}))),a=Object(d.a)(r,2),c=a[0],s=a[1],i=Object(n.useState)(e.getCurrShifts().shifts),u=Object(d.a)(i,2),h=u[0],b=u[1];Object(n.useEffect)((function(){var e=h.map((function(e){return setInterval((function(){s((function(t){return t.map((function(t){return t.name===e.category?(t.data[0]+=4/60/60,Object(l.a)({},t)):t}))}))}),4e3)}));return function(){return e.forEach((function(e){return clearInterval(e)}))}}),[h,s]);var j=e.getCurrShifts().shifts;if(j.every((function(e,t){return e.equals(h[t])}))){return Object(o.jsxs)("div",{id:"hours-spent-dashboard",className:"jumbotron bg-light border m-3 p-4 rounded shadow  d-none d-md-block",children:[Object(o.jsx)("h1",{className:"display-4 text-center col-12 col-md-3 col-xl-12",children:"Hours Spent In Last Week"}),Object(o.jsx)(_.Chart,{width:600,height:250,series:c,children:Object(o.jsx)(_.Transform,{method:["stackNormalized"],children:Object(o.jsx)(_.Pies,{className:"category-pie-chart",colors:"category10",combined:!0,innerRadius:"20%",padAngle:.015,cornerRadius:5,innerPadding:2,pieAttributes:{onMouseMove:function(e){return e.target.style.opacity=1},onMouseLeave:function(e){return e.target.style.opacity=.5},onMouseUp:function(e){var t=e.target.parentElement.parentElement;console.log(t.classList);var r=t.classList[1].replace("category-pie-chart-series-","");console.log(t.classList),console.log(r),console.log(c[+r])}},pieStyle:{opacity:.5}})})})]})}b(j)},M=(r(369),r(370),function(e){var t=e.className,r=e.INITIAL_STATE,a=e.onSubmit,c=e.submitText,s=void 0===c?"Submit":c,i=e.errors,f=void 0===i?[]:i,h=Object(n.useState)(r),b=Object(d.a)(h,2),j=b[0],p=b[1],v=function(e){return p((function(t){return Object(l.a)(Object(l.a)({},t),{},Object(u.a)({},e.target.name,e.target.value))}))},m=function(){return p(r)};return Object(o.jsxs)("form",{className:t,onSubmit:function(e){e.preventDefault(),a(j,m)},children:[f.map((function(e){return Object(o.jsx)("div",{className:"".concat(t,"-error form-error"),children:e},e)})),Object.keys(r).map((function(e){return Object(o.jsxs)("div",{children:[Object(o.jsxs)("label",{htmlFor:e,children:[" ",e,": "]}),Object(o.jsx)("input",{type:"text",name:e,id:e,value:j[e],onChange:v})]},e)})),Object(o.jsx)("button",{children:s})]})}),H=function(){var e=Object(f.b)(),t=Object(n.useState)([]),r=Object(d.a)(t,2),a=r[0],c=r[1],s=function(){var t=Object(j.a)(b.a.mark((function t(r,n){var a,s,o;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=r.username,s=r.password,t.next=3,e(y({username:a,password:s}));case 3:(o=t.sent).status?(n(),alert("logged In ".concat(o.user.id))):c([o.errors]);case 5:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}();return Object(o.jsx)(M,{className:"Login",INITIAL_STATE:{username:"",password:""},onSubmit:s,submitText:"Login",errors:a})},U=(r(371),function(){var e=Object(f.b)(),t=Object(n.useState)([]),r=Object(d.a)(t,2),a=r[0],c=r[1],s=function(){var t=Object(j.a)(b.a.mark((function t(r,n){var a,s,o;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=r.username,s=r.password,t.next=3,e(O({username:a,password:s}));case 3:(o=t.sent).status?(n(),alert("Registered ".concat(o.user.id))):c([o.errors]);case 5:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}();return Object(o.jsx)(M,{className:"Signup",INITIAL_STATE:{username:"",password:""},onSubmit:s,submitText:"Sign Up!",errors:a})});var P=function(){var e=Object(f.c)((function(e){return e.user}));return Object(o.jsxs)("div",{className:"App",children:[Object(o.jsx)("h1",{children:Object.keys(e).map((function(t){return e[t]}))}),Object(o.jsx)(H,{}),Object(o.jsx)(U,{}),Object(o.jsx)(i,{}),Object(o.jsx)(F,{}),Object(o.jsx)(L,{})]})},B=function(e){e&&e instanceof Function&&r.e(3).then(r.bind(null,379)).then((function(t){var r=t.getCLS,n=t.getFID,a=t.getFCP,c=t.getLCP,s=t.getTTFB;r(e),n(e),a(e),c(e),s(e)}))},W=r(178),q=r(179),J=r(114),z=r(180),V=r.n(z),G=r(181),K=r.n(G),Q=r(182),X=(r(120),r(22)),Y=[];var Z=[];var $={};var ee=Object(X.combineReducers)({shifts:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Y,r=arguments.length>1?arguments[1]:void 0;switch(r.type){case"START_SHIFT":return e=new R(r.payload),[].concat(Object(T.a)(t),[e]);case"UPDATE_SHIFT":return e=new R(r.payload),t.map((function(t){return(t=new R(t)).equals(e,!0)?r.payload:t}));default:return t}},user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_USER":return t.payload;case"RESET_USER":return $;default:return e}},errors:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Z,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_ERROR":return[].concat(Object(T.a)(e),[t.payload]);case"REMOVE_ERROR":return e.filter((function(e){return e.message!==t.payload.message}));case"RESET_ERROR":return Z;default:return e}}});localStorage.clear();var te={key:"root",storage:V.a,stateReconciler:K.a},re=Object(J.a)(te,ee),ne=Object(X.createStore)(re,Object(q.composeWithDevTools)(Object(X.applyMiddleware)(Q.a))),ae=Object(J.b)(ne),ce=Object(o.jsx)(a.a.StrictMode,{children:Object(o.jsx)(f.a,{store:ne,children:Object(o.jsx)(W.a,{loading:null,persistor:ae,children:Object(o.jsx)(P,{})})})});s.a.render(ce,document.getElementById("root")),B()}},[[375,1,2]]]);
//# sourceMappingURL=main.45a7197f.chunk.js.map