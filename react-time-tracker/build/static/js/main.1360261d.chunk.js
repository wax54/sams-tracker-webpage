(this["webpackJsonpreact-time-tracker"]=this["webpackJsonpreact-time-tracker"]||[]).push([[0],{190:function(t,e,r){},191:function(t,e,r){},369:function(t,e,r){},370:function(t,e,r){},371:function(t,e,r){},375:function(t,e,r){"use strict";r.r(e);var n=r(1),a=r.n(n),s=r(85),c=r.n(s),o=(r(190),r(191),r(0)),i=function(){return Object(o.jsxs)("div",{className:"navbar navbar-expand-sm navbar-dark bg-primary",children:[Object(o.jsxs)("span",{className:"navbar-brand px-4",children:["Time Traker ",Object(o.jsx)("i",{className:"fas fa-chart-line fa-md"})]}),Object(o.jsx)("button",{className:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navLinks",children:Object(o.jsx)("span",{className:"navbar-toggler-icon"})}),Object(o.jsx)("div",{className:"collapse navbar-collapse navbar-nav text-center justify-content-between mx-3",id:"navLinks",children:Object(o.jsx)("a",{href:"index.html",className:"nav-item nav-link active",children:"Dashboard"})})]})},u=r(19),l=r(10),f=r(2),d=r(9),h=r(5),p=r.n(h),b=r(13),j=r(52),v=r.n(j),m=r(68),O=r(69),y=function(){function t(){Object(m.a)(this,t)}return Object(O.a)(t,null,[{key:"login",value:function(){var t=Object(b.a)(p.a.mark((function t(e){var r,n,a,s;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.username,n=e.password,t.prev=1,t.next=4,v.a.post("/api/users/login",{username:r,password:n});case 4:return a=t.sent,this.token=a.data.token,t.abrupt("return",{status:!0,user:a.data.user});case 9:return t.prev=9,t.t0=t.catch(1),s=g(t.t0),t.abrupt("return",{status:!1,errors:s});case 13:case"end":return t.stop()}}),t,this,[[1,9]])})));return function(e){return t.apply(this,arguments)}}()},{key:"register",value:function(){var t=Object(b.a)(p.a.mark((function t(e){var r,n,a,s;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.username,n=e.password,t.prev=1,t.next=4,v.a.post("api/users/register",{username:r,password:n});case 4:return a=t.sent,this.token=a.data.token,t.abrupt("return",{status:!0,user:a.data.user});case 9:return t.prev=9,t.t0=t.catch(1),s=g(t.t0),t.abrupt("return",{status:!1,errors:s});case 13:case"end":return t.stop()}}),t,this,[[1,9]])})));return function(e){return t.apply(this,arguments)}}()},{key:"addShift",value:function(){var t=Object(b.a)(p.a.mark((function t(e){var r,n;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,v.a.post("/api/shifts/",{shift:e,token:this.token});case 3:return r=t.sent,t.abrupt("return",{status:!0,shift:r.data.shift});case 7:return t.prev=7,t.t0=t.catch(0),n=g(t.t0),t.abrupt("return",{status:!1,errors:n});case 11:case"end":return t.stop()}}),t,this,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()},{key:"clockOutShift",value:function(){var t=Object(b.a)(p.a.mark((function t(e,r){var n,a;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,v.a.patch("/api/shifts/".concat(e),{shift:{stop:r},token:this.token});case 3:return n=t.sent,t.abrupt("return",{status:!0,shift:n.data.shift});case 7:return t.prev=7,t.t0=t.catch(0),a=g(t.t0),t.abrupt("return",{status:!1,errors:a});case 11:case"end":return t.stop()}}),t,this,[[0,7]])})));return function(e,r){return t.apply(this,arguments)}}()}]),t}();function g(t){if(t.response){console.error("API Error:",t.response);var e=t.response.data.error.message;return Array.isArray(e)?e:[e]}return["DB CONNECTION ERROR"]}y.token="";var x=y;function k(t){return w(t,new Date)}function w(t,e){return function(){var r=Object(b.a)(p.a.mark((function r(n){var a;return p.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,x.clockOutShift(t,e);case 2:if(!0!==(a=r.sent).status){r.next=6;break}return n({type:"UPDATE_SHIFT",payload:a.shift}),r.abrupt("return",!0);case 6:if(!1!==a.status){r.next=9;break}return console.error(a.errors),r.abrupt("return",!1);case 9:case"end":return r.stop()}}),r)})));return function(t){return r.apply(this,arguments)}}()}function N(t){var e=t.username,r=t.password;return function(){var t=Object(b.a)(p.a.mark((function t(n){var a;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,x.login({username:e,password:r});case 2:return!0===(a=t.sent).status&&n({type:"SET_USER",payload:a.user}),t.abrupt("return",a);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}function S(t){var e=t.username,r=t.password;return function(){var t=Object(b.a)(p.a.mark((function t(n){var a;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,x.register({username:e,password:r});case 2:return!0===(a=t.sent).status&&n({type:"SET_USER",payload:a.user}),t.abrupt("return",a);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}var T=function(t){var e=t.msg,r=t.persistence,n=void 0===r?0:r,a=Math.random()+"-alert";return+n>0&&setTimeout((function(){document.getElementById(a).remove()}),+n),Object(o.jsx)("div",{className:"alert bg-warning",id:a,children:e})},E=function(){var t=Object(d.d)((function(t){var e=t.shifts,r=[];for(var n in e)e[n].stop||r.push(e[n]);return r})),e={type:"",category:""},r=Object(n.useState)(e),a=Object(f.a)(r,2),s=a[0],c=a[1],i=Object(n.useState)({}),h=Object(f.a)(i,2),j=h[0],v=h[1],m=Object(d.c)();function O(t){var e=t.target,r=e.name,n=e.value;c((function(t){return Object(l.a)(Object(l.a)({},t),{},Object(u.a)({},r,n))}))}function y(t,e){v((function(r){return Object(l.a)(Object(l.a)({},r),{},Object(u.a)({},t,e))})),setTimeout((function(){v((function(e){return Object(l.a)(Object(l.a)({},e),{},Object(u.a)({},t,void 0))}))}),3e3)}return Object(o.jsx)("form",{id:"new-shift",className:"col-xl border m-3 p-4 rounded shadow ",onSubmit:function(r){r.preventDefault();var n=s.type.toLowerCase(),a=s.category.toLowerCase();if(n&&a){if(t.some((function(t){return t.type===n&&t.category===a})))return void y("both","Already clocked in to ".concat(n," for ").concat(a));c(e),m(function(t,e){return function(){var r=Object(b.a)(p.a.mark((function r(n){var a,s;return p.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return a={start:new Date,type:t,category:e},r.next=3,x.addShift(a);case 3:if(!0!==(s=r.sent).status){r.next=7;break}return n({type:"START_SHIFT",payload:s.shift}),r.abrupt("return",!0);case 7:if(!1!==s.status){r.next=10;break}return console.error(s.errors),r.abrupt("return",!1);case 10:case"end":return r.stop()}}),r)})));return function(t){return r.apply(this,arguments)}}()}(n,a))}else n||y("type","input must be filled"),a||y("category","input must be filled")},children:Object(o.jsxs)("div",{className:"row align-items-center justify-content-around",children:[Object(o.jsx)("h1",{className:"col-lg-3 col-xl-12 display-4 text-center",children:"New Shift!"}),Object(o.jsxs)("div",{className:"col-12 col-lg-2 col-xl-5 m-2 mb-3",children:[Object(o.jsx)("label",{htmlFor:"type",className:"form-label",children:"Work-Type"}),Object(o.jsx)("div",{className:"input-group",children:Object(o.jsx)("input",{type:"text",className:"form-control",id:"type",name:"type",value:s.type,onChange:O,placeholder:"Coding"})}),j.type?Object(o.jsx)(T,{msg:j.type}):null]}),Object(o.jsxs)("div",{className:" col-lg-3 col-xl-5 m-2 mb-3",children:[Object(o.jsx)("label",{htmlFor:"category",className:"form-label",children:"Category"}),Object(o.jsxs)("div",{className:"input-group",children:[Object(o.jsx)("div",{className:"input-group-prepend",children:Object(o.jsx)("span",{className:"input-group-text",children:"For "})}),Object(o.jsx)("input",{type:"text",className:"form-control",id:"category",name:"category",value:s.category,onChange:O,placeholder:"Fun"})]}),j.category?Object(o.jsx)(T,{msg:j.category}):null]}),Object(o.jsxs)("div",{id:"clockin-buttons",className:"col m-2 mb-3",children:[j.both?Object(o.jsx)(T,{msg:j.both}):null,Object(o.jsx)("button",{type:"submit",className:"btn btn-secondary col-12 p-3 px-md-5 ",children:"Clock In"})]})]})})},I=r(70),D=r(26),A=r(7),L=function(){function t(e){var r=e.start,n=e.type,a=e.category,s=e.stop,c=e.id,o=e.u_id;Object(m.a)(this,t),this.id=c,this.u_id=o,r instanceof Date?this.start=r:this.start=new Date(r),this.type=n,this.category=a,s&&(s instanceof Date?this.stop=s:this.stop=new Date(s))}return Object(O.a)(t,[{key:"duration",value:function(){return this.stop?this.stop.getTime()-this.start.getTime():(new Date).getTime()-this.start.getTime()}},{key:"getHours",value:function(){return this.duration()/36e5}},{key:"getFormattedDuration",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:2,e=this.duration(),r=C(e,t);return r}},{key:"equals",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if("object"!==typeof t)return!1;if(this.id&&t.id&&e)return this.id===t.id;if(this.category===t.category&&this.type===t.type){if(this.start.getTime()===t.start.getTime())return!0;if(!e)return!0}return!1}},{key:"clockOut",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date;this.stop=t}},{key:"splitShift",value:function(e,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.category,a=new t({start:e,type:r,category:n,stop:this.stop});return this.clockOut(e),a}}]),t}(),_=function(){function t(){Object(m.a)(this,t),this.shifts=[],this.add.apply(this,arguments)}return Object(O.a)(t,[{key:"toString",value:function(){return"A ShiftCollection of length "+this.length()+" "+this.shifts}},{key:"add",value:function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];for(var n=0,a=e;n<a.length;n++){var s=a[n];s instanceof L||(s=new L(s)),this.shifts.push(s)}}},{key:"getTotalHours",value:function(){return this.shifts.reduce((function(t,e){return t+e.getHours()}),0)}},{key:"remove",value:function(t){var e=this.shifts.findIndex((function(e){return e.category===t.category&&e.type===t.type&&e.start===t.start}));return-1!==e&&(this.shifts.splice(e,1),!0)}},{key:"contains",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return!!this.find(t,e)}},{key:"changeCategory",value:function(t,e){var r=this.category(t).shifts;return!!r.length&&(r.forEach((function(t){t.category=e})),!0)}},{key:"changeType",value:function(t,e){var r=this.type(t).shifts;return!!r.length&&(r.forEach((function(t){t.type=e})),!0)}},{key:"find",value:function(t){var e,r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=Object(A.a)(this.shifts);try{for(n.s();!(e=n.n()).done;){var a=e.value;if(a.equals(t,r))return a}}catch(s){n.e(s)}finally{n.f()}return!1}},{key:"getCategories",value:function(){var t,e=new Set,r=Object(A.a)(this.shifts);try{for(r.s();!(t=r.n()).done;){var n=t.value;e.add(n.category)}}catch(a){r.e(a)}finally{r.f()}return Object(D.a)(e)}},{key:"getTypes",value:function(){var t,e=new Set,r=Object(A.a)(this.shifts);try{for(r.s();!(t=r.n()).done;){var n=t.value;e.add(n.type)}}catch(a){r.e(a)}finally{r.f()}return Object(D.a)(e)}},{key:"getShiftsAfter",value:function(e){return Object(I.a)(t,Object(D.a)(this.shifts.filter((function(t){var r=t.start;return e.getTime()<r.getTime()}))))}},{key:"getShiftsBefore",value:function(e){return Object(I.a)(t,Object(D.a)(this.shifts.filter((function(t){var r=t.start;return e.getTime()<r.getTime()}))))}},{key:"getCurrShifts",value:function(){return Object(I.a)(t,Object(D.a)(this.shifts.filter((function(t){return!t.stop}))))}},{key:"category",value:function(t){return this.filter("category",t)}},{key:"type",value:function(t){return this.filter("type",t)}},{key:"filter",value:function(e,r){var n=this.shifts.filter((function(t){return t[e]==r}));return Object(I.a)(t,Object(D.a)(n))}},{key:"length",value:function(){return this.shifts.length}}]),t}();function C(t,e){var r=36e5,n=864e5,a=2628e6,s=31536e6,c="",o=0;t<0&&(c+="- ",t*=-1);var i=Math.floor(t/s);if(i&&(t-=i*s,c+=i+" years ",++o==e))return c;var u=Math.floor(t/a);if(u&&(t-=u*a,c+=u+" Months ",++o==e))return c;var l=Math.floor(t/n);if(l&&(t-=l*n,c+=l+" Days ",++o==e))return c;var f=Math.floor(t/r);if(f&&(t-=f*r,c+=f+" Hours ",++o==e))return c;var d=Math.floor(t/6e4);if(d&&(t-=6e4*d,c+=d+" mins ",++o==e))return c;var h=Math.floor(t/1e3);return h&&(t-=1e3*h,c+=h+" seconds ",++o),c}var R=function(t){var e=t.shift,r=Object(d.c)(),a=Object(n.useState)(e.getFormattedDuration()),s=Object(f.a)(a,2),c=s[0],i=s[1];function u(t){var n=t.target.dataset.reference;if("NOW"===n)r(k(e.id));else if("-15"===n){var a=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Date;return new Date(e.getTime()+6e4*t)}(-15);r(w(e.id,a))}else console.error("ERROR ",n),r(k(e.id))}return Object(n.useEffect)((function(){var t=setInterval((function(){return i(e.getFormattedDuration())}),1e3);return function(){return clearInterval(t)}}),[e,i]),Object(o.jsxs)("li",{className:"row p-3 align-items-start justify-content-center",children:[Object(o.jsxs)("div",{className:"col-7 text-center h2",children:[Object(o.jsxs)("span",{className:"type",children:[e.type," "]})," for",Object(o.jsxs)("span",{className:"category",children:[" ",e.category]}),Object(o.jsx)("div",{className:"shift-length",children:c})]}),Object(o.jsxs)("div",{className:"col-4 dropdown clockout",children:[Object(o.jsx)("button",{className:"btn btn-secondary dropdown-toggle text-center","data-bs-toggle":"dropdown",children:"Clock Out"}),Object(o.jsxs)("div",{className:"dropdown-menu clock-out",children:[Object(o.jsx)("button",{className:"btn","data-reference":"NOW",onClick:u,children:"Now"}),Object(o.jsx)("button",{className:"btn","data-reference":"-15",onClick:u,children:"15 Mins Ago"})]})]})]})},F=function(){var t=Object(d.d)((function(t){var e=t.shifts,r=[];for(var n in e)e[n].stop||r.push(e[n]);return r}));return t=t.map((function(t){return new L(t)})),Object(o.jsx)("div",{className:"col-xl m-3 p-4 rounded shadow border",children:Object(o.jsxs)("div",{className:"row align-items-center justify-content-around",children:[Object(o.jsx)("h1",{className:"display-4 text-center col-12 col-md-3 col-xl-12",children:"Current Shifts"}),Object(o.jsx)("ul",{id:"current-shifts",className:"col-12 col-md-9 col-xl-12",children:t.map((function(t){return Object(o.jsx)(R,{shift:t},"".concat(t.type,"-").concat(t.category))}))})]})})},M=function(){return Object(o.jsx)("div",{className:"container-fluid p-2 align-items-center justify-content-around",children:Object(o.jsxs)("div",{className:"row border m-3 p-4 rounded shadow justify-content-center",children:[Object(o.jsx)(E,{}),Object(o.jsx)(F,{})]})})},U=r(91),H=function(){var t=Object(d.d)((function(t){return t.shifts}),d.b),e={},r=[];for(var a in t){var s=new L(t[a]);s.stop||r.push(s),e[s.category]?e[s.category].add(s):e[s.category]=new _(s)}var c=Object(n.useState)(Object.keys(e).map((function(t){return{data:[e[t].getTotalHours()],name:t}}))),i=Object(f.a)(c,2),u=i[0],h=i[1];Object(n.useEffect)((function(){var t=r.map((function(t){return setInterval((function(){h((function(e){return e.map((function(e){return e.name===t.category?(e.data[0]+=4/60/60,Object(l.a)({},e)):e}))}))}),4e3)}));return function(){return t.forEach((function(t){return clearInterval(t)}))}}),[t,h]);return Object(o.jsxs)("div",{id:"hours-spent-dashboard",className:"jumbotron bg-light border m-3 p-4 rounded shadow  d-none d-md-block",children:[Object(o.jsx)("h1",{className:"display-4 text-center col-12 col-md-3 col-xl-12",children:"Hours Spent In Last Week"}),Object(o.jsx)(U.Chart,{width:600,height:250,series:u,children:Object(o.jsx)(U.Transform,{method:["stackNormalized"],children:Object(o.jsx)(U.Pies,{className:"category-pie-chart",colors:"category10",combined:!0,innerRadius:"20%",padAngle:.015,cornerRadius:5,innerPadding:2,pieAttributes:{onMouseMove:function(t){return t.target.style.opacity=1},onMouseLeave:function(t){return t.target.style.opacity=.5},onMouseUp:function(t){var e=t.target.parentElement.parentElement;console.log(e.classList);var r=e.classList[1].replace("category-pie-chart-series-","");console.log(e.classList),console.log(r),console.log(u[+r])}},pieStyle:{opacity:.5}})})})]})},P=(r(369),r(370),function(t){var e=t.className,r=t.INITIAL_STATE,a=t.onSubmit,s=t.submitText,c=void 0===s?"Submit":s,i=t.errors,d=void 0===i?[]:i,h=Object(n.useState)(r),p=Object(f.a)(h,2),b=p[0],j=p[1],v=function(t){return j((function(e){return Object(l.a)(Object(l.a)({},e),{},Object(u.a)({},t.target.name,t.target.value))}))},m=function(){return j(r)};return Object(o.jsxs)("form",{className:e,onSubmit:function(t){t.preventDefault(),a(b,m)},children:[d.map((function(t){return Object(o.jsx)("div",{className:"".concat(e,"-error form-error"),children:t},t)})),Object.keys(r).map((function(t){return Object(o.jsxs)("div",{children:[Object(o.jsxs)("label",{htmlFor:t,children:[" ",t,": "]}),Object(o.jsx)("input",{type:"text",name:t,id:t,value:b[t],onChange:v})]},t)})),Object(o.jsx)("button",{children:c})]})}),B=function(){var t=Object(d.c)(),e=Object(n.useState)([]),r=Object(f.a)(e,2),a=r[0],s=r[1],c=function(){var e=Object(b.a)(p.a.mark((function e(r,n){var a,c,o;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=r.username,c=r.password,e.next=3,t(N({username:a,password:c}));case 3:(o=e.sent).status?(n(),s([]),alert("logged In ".concat(o.user.id))):s([o.errors]);case 5:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}();return Object(o.jsx)(P,{className:"Login",INITIAL_STATE:{username:"",password:""},onSubmit:c,submitText:"Login",errors:a})},W=(r(371),function(){var t=Object(d.c)(),e=Object(n.useState)([]),r=Object(f.a)(e,2),a=r[0],s=r[1],c=function(){var e=Object(b.a)(p.a.mark((function e(r,n){var a,c,o;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=r.username,c=r.password,e.next=3,t(S({username:a,password:c}));case 3:(o=e.sent).status?(n(),alert("Registered ".concat(o.user.id))):s([o.errors]);case 5:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}();return Object(o.jsx)(P,{className:"Signup",INITIAL_STATE:{username:"",password:""},onSubmit:c,submitText:"Sign Up!",errors:a})});var Q=function(){var t=Object(d.d)((function(t){return t.user}));return Object(o.jsxs)("div",{className:"App",children:[t?Object(o.jsxs)("h1",{children:[" HELLO ",t.username," "]}):Object(o.jsx)("h1",{children:"PLEASE LOGIN"}),Object(o.jsx)(B,{}),Object(o.jsx)(W,{}),Object(o.jsx)(i,{}),Object(o.jsx)(M,{}),Object(o.jsx)(H,{})]})},q=function(t){t&&t instanceof Function&&r.e(3).then(r.bind(null,379)).then((function(e){var r=e.getCLS,n=e.getFID,a=e.getFCP,s=e.getLCP,c=e.getTTFB;r(t),n(t),a(t),s(t),c(t)}))},J=r(178),z=r(179),G=r(114),V=r(180),K=r.n(V),X=r(181),Y=r.n(X),Z=r(182),$=(r(120),r(23)),tt={};var et=[];var rt={};var nt=Object($.combineReducers)({shifts:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:tt,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"START_SHIFT":var r=new L(e.payload);return Object(l.a)(Object(l.a)({},t),{},Object(u.a)({},r.id,r));case"UPDATE_SHIFT":var n=new L(e.payload);return Object(l.a)(Object(l.a)({},t),{},Object(u.a)({},n.id,n));default:return t}},user:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:rt,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"SET_USER":return e.payload;case"RESET_USER":return rt;default:return t}},shiftQueue:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:et,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"ADD_SHIFT_TO_UPLOAD_QUEUE":return[].concat(Object(D.a)(t),[e.payload]);case"REMOVE_SHIFT_FROM_UPLOAD_QUEUE":return t.filter((function(t){return t.type!==e.payload.type||t.category!==e.payload.category||t.start!==e.payload.start}));case"RESET_UPLOAD_QUEUE":return[].concat(et);default:return t}}});localStorage.clear();var at={key:"root",storage:K.a,stateReconciler:Y.a},st=Object(G.a)(at,nt),ct=Object($.createStore)(st,Object(z.composeWithDevTools)(Object($.applyMiddleware)(Z.a))),ot=Object(G.b)(ct),it=Object(o.jsx)(a.a.StrictMode,{children:Object(o.jsx)(d.a,{store:ct,children:Object(o.jsx)(J.a,{loading:null,persistor:ot,children:Object(o.jsx)(Q,{})})})});c.a.render(it,document.getElementById("root")),q()}},[[375,1,2]]]);
//# sourceMappingURL=main.1360261d.chunk.js.map